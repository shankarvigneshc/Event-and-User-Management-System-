<!--User page after logging in-->
<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
    
  <title>Schneider Calendar</title>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"/>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script   src="https://code.jquery.com/jquery-2.2.3.min.js"   integrity="sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo="   crossorigin="anonymous"></script>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.0/js/bootstrap-datepicker.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.1/css/bootstrap-datepicker3.min.css">
 
  <link rel="stylesheet" href="/css/bootstrap-social.css">
  <link rel="stylesheet" href="/css/styles.css">
  <script>
    function myFunction() {
      var x = document.getElementById("myDIV");
      
      if (x.style.display === "block") {
        x.style.display = "none";
      } else {
        x.style.display = "block";
      }
    }
    function myFunction2() {
      var x = document.getElementById("editt");
      
      if (x.style.display === "block") {
        x.style.display = "none";
      } else {
        x.style.display = "block";
      }
    }
    function myFunction3() {
      var x = document.getElementById("dlt");
      
      if (x.style.display === "block") {
        x.style.display = "none";
      } else {
        x.style.display = "block";
      }

    }
    function myfunction6() {
      var x = document.getElementById("filter");
      
      if (x.style.display === "block") {
        x.style.display = "none";
      } else {
        x.style.display = "block";
      }

    }
    
     
  </script>
     <script>
     $( document ).ready(function() {
         $("#from-datepicker").datepicker({ 
             format: 'yyyy-mm-dd'
         });
         $("#from-datepicker").on("change", function () {
             var fromdate = $(this).val();
             document.getElementById("from-datepicker").innerHTML=fromdate;
         });
     }); 
     </script>
      

  <style>
    #myDIV {
 
  display: none;
  
  background-color:limegreen;
  margin-top: 45px;
}
#dlt {
 
 display: none;
 background-color: limegreen;
 
}
#editt {
 
 display: none;
 background-color: limegreen;
 
}
#filter {
 
 display: none;
 
 
}
#button
{
  background-color: limegreen;
  color: white;

}

#container {
    width: 2000px;
    border:none;
    
}
#first {
    width: 1000px;
    float: left;
    height: 900px;
      
}
#second {
    width: 500px;
    float: left;
    height: 900px;
    
}

body {
    margin: 0;
    padding: 0;
    font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
    font-size: 14px;
  }

 

  </style>
  
</head>

<body onload="myfunctionn();">

<div>
  <img src="/images/correct_logo.png" style="width: 180px;   max-height: 80px; padding-left: 5px;">
  <a class="btn btn-light btn-lg" href="/logout" role="button" style="background-color: limegreen;color: white;border: none;  margin-top: 15px;margin-right: 10px; font-size: 15px; border-radius: 15px;float: right;">Log Out</a>
  <a class="btn btn-dark btn-lg" href="/admin" role="button" style="background-color: limegreen;color: white;border: none; margin-top: 15px;margin-right: 20px; font-size: 15px; border-radius: 15px;float: right;">Admin page</a>
  <button class="btn btn-dark btn-lg" style="background-color: limegreen;border: none;color:white; margin-top:15px;margin-right: 30px; font-size: 15px; border-radius: 15px;float:right;" onclick="myFunction3()">Delete events</a>
  </button>
    <button class="btn btn-dark btn-lg" style="background-color: limegreen;border: none;color:white; margin-top:15px;margin-right: 30px; font-size: 15px; border-radius: 15px;float:right;" onclick="myFunction2()">Edit events</a>
  </button>
  <button class="btn btn-dark btn-lg" style="background-color: limegreen;border: none;color:white; margin-top:15px;margin-right: 30px; font-size: 15px; border-radius: 15px;float:right;" onclick="myFunction()">Create new event</a>
  </button>
  <!-- <button class="btn btn-dark btn-lg" type="submit" style="color:white;background-color:limegreen;border: none;color:white; font-size: 15px; margin-top:15px;margin-right: 30px; border-radius: 15px;float: right;" onclick="myfunction9()">View all events</button> -->
  <button class="btn btn-dark btn-lg"  style="color:white;background-color:limegreen;border: none;color:white; font-size: 15px; margin-top:15px;margin-right: 30px; border-radius: 15px;float: right;" onclick="myfunction6()">Filter events</button>
  <button class="btn btn-dark btn-lg"  style="color:white;background-color:limegreen;border: none;color:white; font-size: 15px; margin-top:15px;margin-right: 30px; border-radius: 15px;float: right;" onclick="myfunctionn()">View all events</button>
  
 

 

  <hr>
</div>

 
<div id="container" style="padding-left: 50px;">
<div id="first">
 
  <div class="table-responsive">
  <h1 style="color: limegreen;">Events</h1> 
  <br/>
  <table class="table table-bordered table-striped" id= "event_table">
    <thead style="background-color: limegreen;color: white;">
           
      <th>Title</th>
      <th>Start</th>
      <th>End</th>
      <th>Description</th>
      <th>URL</th>
      <th>ID</th>
      
  </thead>
  <tbody>
  
  </tbody>
  </table>
  
  
  </div>
  </div>
  
 
</div>
<div id="second">

<div id="filter" style="color:white;margin-top: 75px;margin-left: 10px;">
  <p style="color: limegreen;">Select Date: <input type="text" id="from-datepicker"></p>
  <button class="btn btn-dark btn-lg" type="submit" style="background-color:limegreen;border: none;color:white; font-size: 15px; border-radius: 15px;" onclick="myfunction10()">Get Events</button>
</div>

<div id="myDIV" style="color:white;margin-top: 75px;margin-left: 10px;" >
      <form action="/registerEvent" method="POST" autocomplete="off">
        
        <!-- <div class="form-group">
          <label for="eid">ID</label>
         
          <input type="number" class="form-control" name="eid" id="createeid">
        </div> -->
        <div class="form-group">
          <label for="title">Title</label>
          <input type="text" class="form-control" name="title">
        </div>
        <div class="form-group">
          <label for="desc">Description</label>
          <input type="text" class="form-control" name="desc">
        </div>
        <div class="form-group">
          <label for="url">URL</label>
          <input type="url" class="form-control" name="url">
        </div>
        <div class="form-group">
          <label for="start">Start</label>
          <input type="datetime-local" class="form-control" name="start">
          <!-- <input type="time" class="form-control" name="start"> -->
        </div>
        <div class="form-group">
            <label for="end">End</label>
            <input type="datetime-local" class="form-control" name="end">
            <!-- <input type="time" class="form-control" name="end"> -->
        </div>

          
        <button class="btn btn-dark btn-lg" type="submit" style="background-color:limegreen;border: none;color:white; margin-right: 10px; font-size: 15px; border-radius: 15px;float:left;">Submit</button>
            
      </form>
</div>
<div id="editt" style="color:white;margin-top: 75px;margin-left: 10px;">
  <form action="/updateEvent" method="POST">
    
    <div class="form-group">
      <label for="eid">ID</label>
      <input type="text" class="form-control" name="eidd" value="" id="u_eid">
    </div>
    <div class="form-group">
      <label for="title">Title</label>
      <input type="text" class="form-control" name="title" value="" id="u_title">
    </div>
    <div class="form-group">
      <label for="desc">Description</label>
      <input type="text" class="form-control" name="desc" value="" id="u_desc">
    </div>
    <div class="form-group">
      <label for="url">URL</label>
      <input type="url" class="form-control" name="url" value="" id="u_url">
    </div>
    <div class="form-group">
      <label for="start">Start</label>
      <input type="datetime-local" class="form-control" name="start" value="" id="u_start">
    </div>
    <div class="form-group">
        <label for="end">End</label>
        <input type="datetime-local" class="form-control" name="end" value="" id="u_end">
    </div>
      
    <button class="btn btn-dark btn-lg" type="submit" style="background-color:limegreen;border: none;color:white; margin-right: 10px; font-size: 15px; border-radius: 15px;float:left;">Submit</button>
        
  </form>
</div>
<div id="dlt" style="color:white;margin-top: 75px;margin-left: 10px;">
  <form action="/deleteEvent" method="POST">
        
    <div class="form-group">
      <label for="eid">ID</label>
      <input type="text" class="form-control" name="eid" value="" id="eid">
    </div>
   
    
      
    <button class="btn btn-dark btn-lg" type="submit" style="background-color:limegreen;border: none;color:white; margin-right: 10px; font-size: 15px; border-radius: 15px;float:left;">Confirm Delete</button>
        
  </form>
</div>
</div>

<script>
          function myfunctionn(){
 

            $('#event_table').find('tbody').empty();
             $.getJSON('events.json', function(data) {
             
             $.each(data, function(key, value) {
                  var event=" ";
                  
             event+="<tr>";
             event+="<td>"+value.title+"</td>";
             event+="<td>"+value.start+"</td>";
             event+="<td>"+value.end+"</td>";
             event+="<td>"+value.desc+"</td>";
             event+="<td>"+value.url+"</td>";
             event+="<td>"+value._id+"</td>";  
             event+="</tr>";
             $('#event_table').find('tbody').append(event);
                
                  
             
           var button2 = document. createElement("button");
           button2.style.backgroundColor="limegreen";
           button2.style.color="white";
           button2.style.border="none";
           button2.style.fontSize="17px";
           button2.style.borderRadius="15px";
           //var radioYes = document.createElement("input");
           //radioYes.setAttribute("type", "radio");
           button2. innerHTML = "Select this event";
           
           button2.addEventListener ("click", function() {
             const eidd=document.getElementById("eid");
             console.log(value._id);
             eidd.value = value._id;
             const u_eid=document.getElementById("u_eid");
             console.log(value._id);
             u_eid.value = value._id;
             const u_title=document.getElementById("u_title");
             u_title.value = value.title;
             const u_desc=document.getElementById("u_desc");
             u_desc.value = value.desc;
             const u_url=document.getElementById("u_url");
             u_url.value = value.url;
                         
           });
           $('#event_table').find('tbody').append(button2);
          });
        });
      
    }
         
          
              
</script>
<script>
  $( function() {
    $( "#datepicker" ).datepicker();
  } );
  function myfunction10()
  {
        var d=document.getElementById("from-datepicker").value;
        $('#event_table').find('tbody').empty();
        $.getJSON('events.json', function(data) {
        
        $.each(data, function(key, value) {
             var event=" ";
             
             var timestamp=new Date(value.start).getTime();
             var todate=new Date(timestamp).getDate();
             var tomonth=new Date(timestamp).getMonth()+1;
             var toyear=new Date(timestamp).getFullYear();
             if(todate>=1&&todate<=9)
             todate="0"+todate;
             if(tomonth>=1&&tomonth<=9)
             tomonth="0"+tomonth;
             var original_date=toyear+'-'+tomonth+'-'+todate;
             // console.log(original_date);
             // console.log(d);
             
             if(d===original_date)
             {
                    event+="<tr>";
                    event+="<td>"+value.title+"</td>";
                    event+="<td>"+value.start+"</td>";
                    event+="<td>"+value.end+"</td>";
                    event+="<td>"+value.desc+"</td>";
                    event+="<td>"+value.url+"</td>";
                    event+="<td>"+value._id+"</td>";  
                    event+="</tr>";
                    $('#event_table').find('tbody').append(event);
                    var button2 = document. createElement("button");
            button2.style.backgroundColor="limegreen";
            button2.style.color="white";
            button2.style.border="none";
            button2.style.fontSize="17px";
            button2.style.borderRadius="15px";
            button2. innerHTML = "Select this event";
            
            button2.addEventListener ("click", function() {
            const eidd=document.getElementById("eid");
            console.log(value._id);
            eidd.value = value._id;
            const u_eid=document.getElementById("u_eid");
            console.log(value._id);
            u_eid.value = value._id;
            const u_title=document.getElementById("u_title");
            u_title.value = value.title;
            const u_desc=document.getElementById("u_desc");
            u_desc.value = value.desc;
            const u_url=document.getElementById("u_url");
            u_url.value = value.url;
            });
        $('#event_table').find('tbody').append(button2);
             }
             
        });
 
  });

  }
  
  
 
  </script>
  
      
 
</body>

</html>